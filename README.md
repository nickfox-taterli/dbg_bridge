# 调试桥模块 - UART 转 AXI 接口

![测试电路][1]

测试电路中,GPIO模块是仅输出,只有1位宽度.

## 功能概述
本模块是一个 **UART 转 AXI 桥接**,通过接收 UART 调试命令并将其转换为 AXI 总线上的读写操作,主要用于调试目的.此模块支持基本的存储器操作,并且具有可配置的系统时钟频率,波特率和AXI ID.

## 模块功能

- **存储器写操作 (命令 0x10)**:将数据写入指定的存储器地址.
- **存储器读操作 (命令 0x11)**:从指定的存储器地址读取数据.
  
### 数据传输格式

- **写操作**:  
  格式: `命令(1B) + 长度(1B) + 地址(4B) + 数据(N x 4B)`  
  描述: 发送一个写命令,指定数据长度、目标地址和要写入的数据.
  举例: 10 04 40 00 00 00 01 00 00 00

- **读操作**:  
  格式: `命令(1B) + 长度(1B) + 地址(4B)`  
  描述: 发送一个读命令,指定数据长度和目标地址,模块会从该地址读取数据并通过 UART 返回.
  举例: 11 04 40 00 00 00

### FIFO 缓冲
- 发送 FIFO:2KB (可调,使用 BRAM 实现)
- 接收 FIFO:2KB (可调,使用 BRAM 实现)

## 参数说明

| 参数         | 默认值        | 说明                               |
|--------------|---------------|------------------------------------|
| `CLK_FREQ`   | 100 MHz       | 系统时钟频率 (Hz)                  |
| `BAUD_RATE`  | 115200        | UART 波特率                        |

## 接口描述

### 时钟与复位
- **clk_i** 系统时钟输入.
- **rst_i** 系统复位信号(高有效).

### UART 接口
- **uart_rxd_i** UART 接收数据输入.
- **uart_txd_o** UART 发送数据输出.

### AXI 接口
此模块支持基本的 AXI 总线协议,太出名了,懒得写了.

## 设计说明

- 本模块使用一个简单的协议,通过 UART 接收调试命令并进行数据转换.
- 本模块的设计没有考虑噪音容错,主要用于调试使用,存在一定的限制和缺陷.
- 测试平台:本模块在 **XC7A35T** 上综合OK (Vivado 2024.1),时钟频率为 100 MHz,测试通过.

## 资源消耗

- **LUTs** 95
- **BRAM** 1 个

## 目录结构

```
rtl/    # 存放 Verilog 源代码
tb/     # 存放测试平台代码
```

## 参考项目

该项目参考了 [core_dbg_bridge](https://github.com/ultraembedded/core_dbg_bridge),这是一个开源的 UART 转 AXI 桥接设计.

## 注意事项

- **无容错** 本模块没有考虑噪音和错误容错,只用于调试.
- **自由使用** 该模块没有版权限制,用户可以自由使用.若发现问题,本模块作者不负责修复或提供支持.


  [1]: img/bd.png